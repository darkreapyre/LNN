# -*- mode: dockerfile -*-
# part of the dockerfile to install the python binding

COPY install/python.sh install/
RUN install/python.sh
ENV PYTHONPATH=/mxnet/python
# Add MXNet Resources
RUN cd /root/ \
    && git clone https://github.com/awslabs/ecs-deep-learning-workshop.git \
    && git clone https://github.com/dmlc/mxnet-notebooks.git \
    && git clone https://github.com/zackchase/mxnet-the-straight-dope \
    && git clone https://github.com/gluon-api/gluon-api
# Add Tini. Tini operates as a process subreaper for jupyter.
ENV TINI_VERSION v0.6.0
ADD https://github.com/krallin/tini/releases/download/${TINI_VERSION}/tini /usr/bin/tini
RUN chmod +x /usr/bin/tini
EXPOSE 8888
ENTRYPOINT ["/usr/bin/tini", "--"]
CMD ["jupyter", "notebook", "--port=8888", "--no-browser", "--ip='*'", "--allow-root"]